ENV['RACK_ENV'] = 'test'

require 'sinatra/activerecord/rake'
require './application.rb'
require 'cucumber/rake/task'
require "jshintrb/jshinttask"
  
  Cucumber::Rake::Task.new(:cucumber) do |task|
    Rake::Task['db:migrate'].invoke
    task.cucumber_opts = ["features"]
  end


  Jshintrb::JshintTask.new(:jshint) do |t|
    t.pattern = 'public/js/application.js'
    t.options = {:strict => false}
  end

task :default => [:cucumber, :jshint]


