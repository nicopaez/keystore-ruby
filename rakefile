require 'sinatra/activerecord/rake'

if ENV['RACK_ENV'].nil? 
  ENV['RACK_ENV'] = 'test'

  require './application.rb'
  require 'cucumber/rake/task'
  require "jshintrb/jshinttask"
  
  Cucumber::Rake::Task.new(:cucumber) do |task|
    Rake::Task['db:migrate'].invoke
    task.cucumber_opts = ["features"]
  end


  Jshintrb::JshintTask.new(:jshint) do |t|
    t.pattern = 'public/js/application.js'
    t.options = {:strict => false}
  end

  task :default => [:cucumber, :jshint]
end


